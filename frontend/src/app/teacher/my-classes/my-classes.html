<div class="my-classes-container">
  <h2>Cursurile mele</h2>

  <button routerLink="/teacher/course-form" class="btn-add-course">
    + AdaugÄƒ curs nou
  </button>

  <div *ngIf="loading()">Se Ã®ncarcÄƒ...</div>
  <div *ngIf="error()">{{ error() }}</div>

  <div class="courses-list" *ngIf="!loading()">
    <div class="course-card" *ngFor="let course of courses()">

      <!-- HEADER CURS -->
      <div class="course-header" (click)="toggleCourse(course.Id)">
        <h3>{{ course.Title }}</h3>
        <span class="toggle-icon">
          {{ expandedCourseId() === course.Id ? 'â–²' : 'â–¼' }}
        </span>
      </div>

      <p>{{ course.Description }}</p>

      <!-- ACTIONS -->
      <div class="course-actions">
        <button (click)="editCourse(course.Id)">EditeazÄƒ</button>
        <button (click)="inviteStudents(course.Id)">InvitÄƒ studenÈ›i</button>
        <button (click)="addModule(course.Id)">+ Modul nou</button>
      </div>

      <!-- EXPANDED STRUCTURE -->
      <div *ngIf="expandedCourseId() === course.Id" class="course-details">
        <div *ngIf="!course.modules">Se Ã®ncarcÄƒ structura...</div>

        <div class="module-card" *ngFor="let module of course.modules">
          <h4>{{ module.Title }}</h4>
          <button (click)="addLesson(module.Id)">+ LecÈ›ie nouÄƒ</button>

          <div class="lessons-list">
            <div class="lesson-card" *ngFor="let lesson of module.lessons">
              <div class="lesson-header" (click)="toggleLesson(lesson)">
                <strong>{{ lesson.OrderIndex }}. {{ lesson.Title }}</strong>
                <span class="toggle-icon">{{ lesson.expanded ? 'â–²' : 'â–¼' }}</span>
              </div>

              <div class="lesson-content" *ngIf="lesson.expanded">
                <p>{{ lesson.Content }}</p>
                <a *ngIf="lesson.VideoUrl" [href]="lesson.VideoUrl" target="_blank">ðŸŽ¥ Vezi video</a>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
